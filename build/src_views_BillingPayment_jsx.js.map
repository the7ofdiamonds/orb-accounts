{"version":3,"file":"src_views_BillingPayment_jsx.js","mappings":"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","sources":["webpack://orb-accounts/./src/error/ErrorComponent.jsx","webpack://orb-accounts/./src/loading/LoadingComponent.jsx","webpack://orb-accounts/./src/views/BillingPayment.jsx","webpack://orb-accounts/./src/views/components/PaymentNavigation.jsx","webpack://orb-accounts/./src/views/components/StatusBar.jsx"],"sourcesContent":["function ErrorComponent(props) {\n  const { error } = props;\n\n  return (\n    <main className=\"error\">\n      <div className=\"status-bar card error\">\n        <span>{error}</span>\n      </div>\n    </main>\n  );\n}\n\nexport default ErrorComponent;\n","function LoadingComponent() {\n  return (\n    <div className=\"loading\">\n      <h1>Loading......</h1>\n    </div>\n  );\n}\n\nexport default LoadingComponent;\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PaymentNavigationComponent from './components/PaymentNavigation.jsx';\n\nimport { getUser } from '../controllers/accountsUsersSlice.js';\nimport { getInvoiceByID } from '../controllers/accountsInvoiceSlice.js';\nimport { getReceipt } from '../controllers/accountsReceiptSlice.js';\nimport {\n  getStripeInvoice,\n  getPaymentIntent,\n} from '../controllers/accountsStripeSlice.js';\n\nimport LoadingComponent from '../loading/LoadingComponent.jsx';\nimport ErrorComponent from '../error/ErrorComponent.jsx';\nimport StatusBar from './components/StatusBar.jsx';\n\nfunction PaymentComponent() {\n  const { id } = useParams();\n\n  const [messageType, setMessageType] = useState('');\n  const [message, setMessage] = useState('');\n\n  const { user_email } = useSelector((state) => state.accountsUser);\n  const { stripe_invoice_id, status, amount_remaining } = useSelector(\n    (state) => state.accountsInvoice\n  );\n  const { paymentLoading, paymentError } = useSelector(\n    (state) => state.accountsPayment\n  );\n  const { receipt_id } = useSelector((state) => state.accountsReceipt);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getUser()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        } else {\n          dispatch(\n            getInvoiceByID(id, response.payload.stripe_customer_id)\n          ).then((response) => {\n            if (response.error !== undefined) {\n              console.error(response.error.message);\n              setMessageType('error');\n              setMessage(response.error.message);\n            } else {\n              dispatch(\n                getStripeInvoice(response.payload.stripe_invoice_id)\n              ).then((response) => {\n                if (response.error !== undefined) {\n                  console.error(response.error.message);\n                  setMessageType('error');\n                  setMessage(response.error.message);\n                } else {\n                  dispatch(\n                    getPaymentIntent(response.payload.payment_intent_id)\n                  ).then((response) => {\n                    if (response.error !== undefined) {\n                      console.error(response.error.message);\n                      setMessageType('error');\n                      setMessage(response.error.message);\n                    }\n                  });\n                }\n              });\n            }\n          });\n        }\n      });\n    }\n  }, [user_email, dispatch]);\n// Check to see if payment intent\n  useEffect(() => {\n    if (status === 'open') {\n      setMessage('Choose a payment method');\n    } else if (status === 'paid' && amount_remaining === 0) {\n      setMessage('This invoice has been paid in full.');\n    }\n  }, [status, amount_remaining]);\n\n  useEffect(() => {\n    if (stripe_invoice_id) {\n      dispatch(getReceipt()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  }, [stripe_invoice_id, dispatch]);\n\n  const handleClick = () => {\n    if (receipt_id) {\n      window.location.href = `/billing/receipt/${receipt_id}`;\n    }\n  };\n\n  if (paymentLoading) {\n    return <LoadingComponent />;\n  }\n\n  if (paymentError) {\n    return <ErrorComponent error={paymentError} />;\n  }\n\n  return (\n    <>\n      <section className=\"payment\">\n        <h2 className=\"title\">PAYMENT</h2>\n\n        {status === 'open' ? <PaymentNavigationComponent /> : ''}\n\n        <StatusBar message={message} messageType={messageType} />\n\n        {receipt_id && status == 'paid' ? (\n          <button onClick={handleClick}>\n            <h3>RECEIPT</h3>\n          </button>\n        ) : (\n          ''\n        )}\n      </section>\n    </>\n  );\n}\n\nexport default PaymentComponent;\n","import { NavLink } from 'react-router-dom';\nimport {\n  useNavigate,\n  useParams,\n} from 'react-router-dom';\n\nfunction PaymentNavigationComponent() {\n  const { id } = useParams();\n\n  return (\n    <>      \n      <div className=\"payment-options\">\n        <NavLink to={`/billing/payment/wallet/${id}`}>\n          <button className=\"mobile-btn\" id=\"mobile-btn\">\n            <h3>WALLET</h3>\n          </button>\n        </NavLink>\n\n        <NavLink to={`/billing/payment/card/${id}`}>\n          <button className=\"debit-credit-btn\" id=\"debit-credit-btn\">\n            <h3>CARD</h3>\n          </button>\n        </NavLink>\n      </div>\n    </>\n  );\n}\n\nexport default PaymentNavigationComponent;\n","function StatusBarComponent(props) {\n  const { message, messageType } = props;\n\n  return (\n    <>\n      {message && (\n        <div className={`status-bar card ${messageType}`}>\n          <span>\n            <h4>{message}</h4>\n          </span>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default StatusBarComponent;\n"],"names":["ErrorComponent","props","error","createElement","className","LoadingComponent","useEffect","useState","useParams","useDispatch","useSelector","PaymentNavigationComponent","getUser","getInvoiceByID","getReceipt","getStripeInvoice","getPaymentIntent","StatusBar","PaymentComponent","id","messageType","setMessageType","message","setMessage","user_email","state","accountsUser","stripe_invoice_id","status","amount_remaining","accountsInvoice","paymentLoading","paymentError","accountsPayment","receipt_id","accountsReceipt","dispatch","then","response","undefined","console","payload","stripe_customer_id","payment_intent_id","handleClick","window","location","href","Fragment","onClick","NavLink","useNavigate","to","StatusBarComponent"],"sourceRoot":""}