"use strict";(self.webpackChunkorb_accounts=self.webpackChunkorb_accounts||[]).push([[440,914,40],{2008:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=function(e){const{error:t}=e;return React.createElement("main",{className:"error"},React.createElement("div",{className:"status-bar card error"},React.createElement("span",null,t)))}},8914:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=function(){return React.createElement("div",{className:"loading"},React.createElement("h1",null,"Loading......"))}},6440:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(7294),n=r(5998),c=r(7196),l=r(2047),o=r(6550),s=r(8914),u=r(2008),i=r(8849);const m=function(){const e=(0,n.I0)(),[t,r]=(0,a.useState)("info"),[m,d]=(0,a.useState)("Check the boxes next to the services you would like performed."),[E,f]=(0,a.useState)([]),{servicesLoading:h,servicesError:p,services:g}=(0,n.v9)((e=>e.accountsServices)),{user_email:b,stripe_customer_id:_}=(0,n.v9)((e=>e.accountsUser)),{quoteLoading:v,quoteError:y,stripe_quote_id:N,quotes:k,quote_id:w,quote_status:q,selections:R,total:S}=(0,n.v9)((e=>e.accountsQuote));return(0,a.useEffect)((()=>{b&&e((0,l.PR)()).then((e=>{void 0!==e.error&&(console.error(e.error.message),r("error"),d(e.error.message))}))}),[b,e]),(0,a.useEffect)((()=>{_&&e((0,o.kS)())}),[_,e]),(0,a.useEffect)((()=>{if(Array.isArray(k)&&k.length>0){const t=[];if(k.forEach((e=>{const r=Math.floor(Date.now()/1e3),a=parseInt(e.expires_at),n=new Date(e.created_at).getTime(),c=e.status;r<a&&("draft"!==c&&"open"!==c&&"accepted"!==c||t.push(n))})),t.length>0){const r=Math.min(...t);k.forEach((t=>{new Date(t.created_at).getTime()===r&&e((0,o.ht)(t.stripe_quote_id))}))}}}),[k,e]),(0,a.useEffect)((()=>{_&&e((0,c.Qz)())}),[_,e]),(0,a.useEffect)((()=>{e((0,o.RC)(E))}),[e,E]),(0,a.useEffect)((()=>{e((0,o.XX)(g.price))}),[e,g.price,E]),(0,a.useEffect)((()=>{e((0,o.TL)())}),[e,E]),(0,a.useEffect)((()=>{N&&e((0,o.ht)()).then((e=>{void 0!==e.error&&(console.error(e.error.message),r("error"),d(e.error.message))}))}),[N,e]),h?a.createElement(s.default,null):p?a.createElement(u.default,{error:p}):a.createElement(a.Fragment,null,a.createElement("section",{className:"selections"},a.createElement("h2",{className:"title"},"selections"),a.createElement("div",{className:"quote-card card"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:"2"},a.createElement("h5",{className:"title"},"service")),a.createElement("th",null,a.createElement("h5",{className:"title"},"cost")))),a.createElement("tbody",null,g&&g.length?a.createElement(a.Fragment,null,g.map((e=>{const{id:t,price_id:r,description:n,price:c,onboarding_link:l}=e;return a.createElement("tr",{key:t,id:"quote_option"},a.createElement("td",null,a.createElement("input",{className:"input selection feature-selection",type:"checkbox",name:"quote[checkbox][]",checked:E.some((e=>e.id===t)),onChange:e=>((e,t,r,a,n,c)=>{const l=e.target.checked;f((e=>{if(l){const l={id:t,price_id:r,description:a,price:n,onboarding_link:c};return[...e,l]}return e.filter((e=>e.id!==t))}))})(e,t,r,n,c,l)})),a.createElement("td",{className:"feature-description"},a.createElement("h5",null,n)),a.createElement("td",{className:"feature-cost table-number",id:"feature_cost"},a.createElement("h5",null,new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(c))))}))):a.createElement("tr",null,a.createElement("td",{colSpan:"3"},a.createElement("h5",null,"No services to show yet")))),a.createElement("tfoot",null,a.createElement("tr",null,a.createElement("th",{colSpan:"2"},a.createElement("h5",{className:"title"},"TOTAL")),a.createElement("th",null,a.createElement("h5",{className:"subtotal"},new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(S))))))),a.createElement(i.Z,{message:m,messageType:t}),Array.isArray(R)&&R.length>0?a.createElement("button",{onClick:()=>{!w||"open"!==q&&"accepted"!==q||(window.location.href=`/billing/quote/${w}`),"draft"===q&&e((0,o.xd)()).then((t=>{void 0!==t.error?(console.error(t.error.message),r("error"),d(t.error.message)):e((0,o.Fb)()).then((e=>{void 0!==e.error?(console.error(e.error.message),r("error"),d(e.error.message)):window.location.href=`/billing/quote/${e.payload.quote_id}`}))})),""!==N&&"canceled"!==q||e((0,o.Ol)()).then((e=>{void 0!==e.error?(console.error(e.error.message),r("error"),d(e.error.message)):window.location.href=`/billing/quote/${e.payload}`}))}},a.createElement("h3",null,"QUOTE")):""))}},8849:(e,t,r)=>{r.d(t,{Z:()=>a});const a=function(e){const{message:t,messageType:r}=e;return React.createElement(React.Fragment,null,t&&React.createElement("div",{className:`status-bar card ${r}`},React.createElement("span",null,React.createElement("h4",null,t))))}}}]);