"use strict";(self.webpackChunkorb_accounts=self.webpackChunkorb_accounts||[]).push([[77],{3077:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(7294),a=n(9250),c=n(5998),l=n(6664),s=n(2345),o=n(2047),m=n(5055),u=n(9227),i=n(2869);const d=(e,t,n)=>{const r=e/100,a=t?t.toLowerCase():"us",c=n||"USD";return new Intl.NumberFormat(a,{style:"currency",currency:c}).format(r)};var E=n(8849);const b=()=>{const{id:e}=(0,a.UO)(),t=(0,c.I0)(),[n,b]=((0,l.useElements)(),(0,r.useState)("info")),[p,f]=(0,r.useState)("Please enter your card number, expiration date, and the code on the back."),{user_email:y,first_name:_,last_name:g,stripe_customer_id:h}=(0,c.v9)((e=>e.accountsUsers)),{stripe_invoice_id:v}=(0,c.v9)((e=>e.accountsInvoice)),{stripeLoading:R,stripeError:$,payment_intent_id:w,status:N,account_country:k,currency:C,amount_due:L,amount_paid:x,amount_remaining:F,onboarding_links:S,client_secret:A,payment_method_id:O,paymentMethod:T}=(0,c.v9)((e=>e.accountsStripe)),{receipt_id:U}=(0,c.v9)((e=>e.accountsReceipt));return(0,r.useEffect)((()=>{y&&t((0,o.PR)(y)).then((n=>{void 0!==n.error?(console.error(n.error.message),b("error"),f(n.error.message)):t((0,m.o4)(e)).then((e=>{void 0!==e.error&&(console.error(e.error.message),b("error"),f(e.error.message))}))}))}),[y,t]),(0,r.useEffect)((()=>{v&&t((0,i.xt)(v))}),[v,t]),(0,r.useEffect)((()=>{w&&t((0,i.Lu)(w))}),[w,t]),(0,r.useEffect)((()=>{O&&t((0,i.wr)(O))}),[O,t]),(0,r.useEffect)((()=>{O&&t((0,i.TV)(function(e){let t="";if(e){const n=e.type,r=e.card,a=r.funding,c=r.brand,l=r.country,s=r.last4,o=e.wallet;if(t="card"===n?`${"unknown"!==a?a:""} ${n} ${l} ${c} ${s}`:"wallet"===n&&null!==o?o:n,e.card_present){const r=e.card_present,a=r.card_present,c=r.brand;t=`${"unknown"!==a?a:""} ${n} ${r.country} ${c} ${r.last4}`}}return t}(O)))}),[O,t]),(0,r.useEffect)((()=>{"paid"===N&&T&&t((0,u.SV)()).then((e=>{void 0!==e.error&&(console.error(e.error.message),b("error"),f(e.error.message))}))}),[N,T,t]),r.createElement(r.Fragment,null,r.createElement("section",{className:"payment"},r.createElement(s.Z,null),r.createElement("form",{className:"debit-credit-card card"},r.createElement("div",{className:"card-number-box"},r.createElement(l.CardNumberElement,null)),r.createElement(l.CardExpiryElement,null),r.createElement(l.CardCvcElement,{className:"cvv-box"})),r.createElement(E.Z,{message:p,messageType:n}),r.createElement("div",{className:"amount"},x?r.createElement(r.Fragment,null,r.createElement("h3",null,"Amount Paid:",d(x,k,C)),r.createElement("h3",null,"Balance:"," ",d(F,k,C))):L?r.createElement("h3",null,"Amount: ",d(L,k,C)):""),r.createElement("div",{className:"action"},L&&A?r.createElement("button",{type:"submit",onClick:()=>{}},r.createElement("h3",null,"pay")):"",U?r.createElement("button",{type:"submit",onClick:()=>{U&&(window.location.href=`/billing/receipt/${U}`)}},r.createElement("h3",null,"receipt")):"",U&&S?r.createElement("button",{type:"submit",onClick:()=>{}},r.createElement("h3",null,"onboarding")):"")))}},2345:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(9655),a=n(9250);const c=function(){const{id:e}=(0,a.UO)();return React.createElement(React.Fragment,null,React.createElement("div",{className:"payment-options"},React.createElement(r.OL,{to:`/billing/payment/wallet/${e}`},React.createElement("button",{className:"mobile-btn",id:"mobile-btn"},React.createElement("h3",null,"WALLET"))),React.createElement(r.OL,{to:`/billing/payment/card/${e}`},React.createElement("button",{className:"debit-credit-btn",id:"debit-credit-btn"},React.createElement("h3",null,"CARD")))))}},8849:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){const{message:t,messageType:n}=e;return React.createElement(React.Fragment,null,t&&React.createElement("div",{className:`status-bar card ${n}`},React.createElement("span",null,React.createElement("h4",null,t))))}}}]);