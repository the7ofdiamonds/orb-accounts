{"version":3,"file":"src_views_BillingInvoices_jsx.index.js","mappings":"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","sources":["webpack://orb-accounts/./src/error/ErrorComponent.jsx","webpack://orb-accounts/./src/loading/LoadingComponent.jsx","webpack://orb-accounts/./src/views/BillingInvoices.jsx"],"sourcesContent":["function ErrorComponent(props) {\n  const { error } = props;\n\n  return (\n    <main className=\"error\">\n      <div className=\"status-bar card error\">\n        <span>{error}</span>\n      </div>\n    </main>\n  );\n}\n\nexport default ErrorComponent;\n","function LoadingComponent() {\n  return (\n    <div className=\"loading\">\n      <h1>Loading......</h1>\n    </div>\n  );\n}\n\nexport default LoadingComponent;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { getUser } from '../controllers/accountsUsersSlice';\nimport { getClientInvoices } from '../controllers/accountsInvoiceSlice';\n\nimport LoadingComponent from '../loading/LoadingComponent.jsx';\nimport ErrorComponent from '../error/ErrorComponent.jsx';\n\nfunction BillingInvoices() {\n  const dispatch = useDispatch();\n\n  const { user_email, stripe_customer_id } = useSelector(\n    (state) => state.accountsUsers\n  );\n  const { invoiceLoading, invoiceError, invoices } = useSelector(\n    (state) => state.accountsInvoice\n  );\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getUser());\n    }\n  }, [user_email, dispatch]);\n\n  useEffect(() => {\n    if (stripe_customer_id) {\n      dispatch(getClientInvoices());\n    }\n  }, [stripe_customer_id, dispatch]);\n\n  if (invoiceLoading) {\n    return <LoadingComponent />;\n  }\n\n  if (invoiceError) {\n    return <ErrorComponent error={invoiceError} />;\n  }\n\n  const now = new Date().getTime();\n  let sortedInvoices = [];\n\n  if (Array.isArray(invoices)) {\n    sortedInvoices = invoices.slice().sort((a, b) => {\n      const timeDiffA = Math.abs(a.due_date - now);\n      const timeDiffB = Math.abs(b.due_date - now);\n\n      return timeDiffA - timeDiffB;\n    });\n  }\n\n  return (\n    <>\n      <section className=\"invoices\">\n        <h2 className=\"title\">Invoices</h2>\n        {Array.isArray(sortedInvoices) && sortedInvoices.length > 0 ? (\n          <div className=\"card invoice\">\n            <table>\n              <thead>\n                <tr>\n                  <th>\n                    <h4>Invoice ID</h4>\n                  </th>\n                  <th>\n                    <h4>Status</h4>\n                  </th>\n                  <th>\n                    <h4>Balance</h4>\n                  </th>\n                  <th>\n                    <h4>Due Date</h4>\n                  </th>\n                  <th>\n                    <h4>Quote ID</h4>\n                  </th>\n                  <th>\n                    <h4>Page</h4>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {sortedInvoices.map((invoice) => (\n                  <>\n                    <tr>\n                      <td>{invoice.id}</td>\n                      <td>{invoice.status}</td>\n                      <td>\n                        {/* add currency column using var invoice.currency */}\n                        {new Intl.NumberFormat('us', {\n                          style: 'currency',\n                          currency: 'USD',\n                        }).format(invoice.amount_remaining)}\n                      </td>\n                      <td>\n                        {invoice.due_date\n                          ? new Date(invoice.due_date * 1000).toLocaleString()\n                          : ''}\n                      </td>\n                      <td>{invoice.quote_id}</td>\n                      <td>\n                        {invoice.status === 'deleted' ? (\n                          <h5>Deleted</h5>\n                        ) : invoice.status === 'paid' ? (\n                          <a href={`/services/invoice/${invoice.id}`}>\n                            <button>\n                              <h5>View</h5>\n                            </button>\n                          </a>\n                        ) : invoice.status === 'void' ? (\n                          <h5>Void</h5>\n                        ) : invoice.status === 'uncollectible' ? (\n                          <h5>Uncollectible</h5>\n                        ) : invoice.status === 'open' ? (\n                          <a href={`/services/invoice/${invoice.id}`}>\n                            <h5>Continue</h5>\n                          </a>\n                        ) : (\n                          <a>\n                            <button onClick={console.log('invoice deleted')}>\n                              <h5>Delete</h5>\n                            </button>\n                          </a>\n                        )}\n                      </td>\n                    </tr>\n                  </>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          ''\n        )}\n      </section>\n    </>\n  );\n}\n\nexport default BillingInvoices;\n"],"names":["ErrorComponent","props","error","React","createElement","className","LoadingComponent","useEffect","useDispatch","useSelector","getUser","getClientInvoices","BillingInvoices","dispatch","_useSelector","state","accountsUsers","user_email","stripe_customer_id","_useSelector2","accountsInvoice","invoiceLoading","invoiceError","invoices","now","Date","getTime","sortedInvoices","Array","isArray","slice","sort","a","b","timeDiffA","Math","abs","due_date","timeDiffB","Fragment","length","map","invoice","id","status","Intl","NumberFormat","style","currency","format","amount_remaining","toLocaleString","quote_id","href","concat","onClick","console","log"],"sourceRoot":""}