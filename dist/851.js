"use strict";(self.webpackChunkorb_accounts=self.webpackChunkorb_accounts||[]).push([[851,914,40],{2008:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=function(e){const{error:t}=e;return React.createElement("main",{className:"error"},React.createElement("div",{className:"status-bar card error"},React.createElement("span",null,t)))}},8914:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=function(){return React.createElement("div",{className:"loading"},React.createElement("h1",null,"Loading......"))}},851:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var a=r(7294),n=r(9250),l=r(5998),c=r(2047),o=r(6550),s=r(5055),m=r(2869),u=r(8914),i=r(2008),d=r(8849);const E=function(){const{id:e}=(0,n.UO)(),[t,r]=(0,a.useState)("info"),[E,h]=(0,a.useState)("To receive an invoice for the selected services, you must accept the quote above."),{user_email:f}=(0,l.v9)((e=>e.accountsUsers)),{quoteLoading:g,quoteError:p,quote_id:v,stripe_quote_id:b,status:N,total:_,selections:C,stripe_invoice_id:y}=(0,l.v9)((e=>e.accountsQuote)),{invoice_id:R}=(0,l.v9)((e=>e.accountsInvoice)),q=(0,l.I0)();return(0,a.useEffect)((()=>{f&&q((0,c.PR)()).then((t=>{void 0!==t.error?(console.error(t.error.message),r("error"),h(t.error.message)):q((0,o.$t)(e,t.payload.stripe_customer_id)).then((e=>{void 0!==e.error?(console.error(e.error.message),r("error"),h(e.error.message)):q((0,m.PC)(e.payload.stripe_quote_id)).then((e=>{void 0!==e.error&&(console.error(e.error.message),r("error"),h(e.error.message))}))}))}))}),[f,q]),(0,a.useEffect)((()=>{"canceled"===N&&(r("error"),h("This quote has been canceled."))}),[N]),(0,a.useEffect)((()=>{v&&"accepted"===N&&q((0,s.zD)(v)).then((e=>{void 0!==e.error&&(console.error(e.error.message),r("error"),h(e.error.message))}))}),[v,N,q]),g?a.createElement(u.default,null):p?a.createElement(i.default,{error:p}):a.createElement(a.Fragment,null,a.createElement("section",{className:"quote"},a.createElement("h2",{className:"title"},"QUOTE"),a.createElement("div",{className:"quote-card card"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement("h4",null,"Quote"))),a.createElement("tr",null,a.createElement("th",null,a.createElement("h4",{className:"number-label"},"NO.")),a.createElement("th",{colSpan:4},a.createElement("h4",{className:"description-label"},"DESCRIPTION")),a.createElement("th",null,a.createElement("h4",{className:"total-label"},"TOTAL")))),a.createElement("tbody",null,C&&C.length>0&&C.map((e=>a.createElement("tr",{id:"quote_option"},a.createElement("td",{className:"feature-id"},e.id),a.createElement("td",{className:"feature-name",id:"feature_name",colSpan:4},e.description),a.createElement("td",{className:"feature-cost  table-number",id:"feature_cost"},a.createElement("h4",null,new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(e.cost))))))))),a.createElement(d.Z,{message:E,messageType:t}),a.createElement("div",{className:"actions"},N&&"open"===N?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>{b&&"open"===N&&q((0,o.sN)()).then((e=>{void 0!==e.error&&(console.error(e.error.message),r("error"),h(e.error.message))}))}},a.createElement("h3",null,"CANCEL")),a.createElement("button",{onClick:async()=>{b&&"open"===N&&q((0,o.g4)()).then((e=>{void 0!==e.error?(console.error(e.error.message),r("error"),h(e.error.message)):q((0,s.US)(e.payload.invoice)).then((e=>{void 0!==e.error?(console.error(e.error.message),r("error"),h(e.error.message)):window.location.href=`/billing/invoice/${e.payload}`}))}))}},a.createElement("h3",null,"ACCEPT"))):"accepted"===N?a.createElement("button",{onClick:()=>{R&&"accepted"===N&&(window.location.href=`/billing/invoice/${R}`)}},a.createElement("h3",null,"INVOICE")):"canceled"===N?a.createElement("button",{onClick:()=>{"canceled"===N&&(window.location.href="/client/selections")}},a.createElement("h3",null,"SELECTIONS")):null)))}},8849:(e,t,r)=>{r.d(t,{Z:()=>a});const a=function(e){const{message:t,messageType:r}=e;return React.createElement(React.Fragment,null,t&&React.createElement("div",{className:`status-bar card ${r}`},React.createElement("span",null,React.createElement("h4",null,t))))}}}]);