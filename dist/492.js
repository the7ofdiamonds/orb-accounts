"use strict";(self.webpackChunkorb_accounts=self.webpackChunkorb_accounts||[]).push([[492,914,40],{2008:(e,t,l)=>{l.r(t),l.d(t,{default:()=>r});const r=function(e){const{error:t}=e;return React.createElement("main",{className:"error"},React.createElement("div",{className:"status-bar card error"},React.createElement("span",null,t)))}},8914:(e,t,l)=>{l.r(t),l.d(t,{default:()=>r});const r=function(){return React.createElement("div",{className:"loading"},React.createElement("h1",null,"Loading......"))}},6492:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var r=l(7294),a=l(9250),n=l(5998),c=l(2047),s=l(5055),m=l(9227),o=l(2869),u=l(8914),d=l(2008),i=l(8849);const E=function(){const{id:e}=(0,a.UO)(),[t,l]=(0,r.useState)("info"),[E,b]=(0,r.useState)("To start receiving the services listed above, please use the payment button below."),{user_email:h}=(0,n.v9)((e=>e.accountsUsers)),{invoiceLoading:p,invoiceError:N,status:y,customer_name:g,customer_tax_ids:v,address_line_1:f,address_line_2:_,city:S,state:T,postal_code:w,customer_phone:R,customer_email:I,stripe_invoice_id:A,due_date:D,amount_due:L,subtotal:U,tax:O,payment_intent_id:F,items:k}=(0,n.v9)((e=>e.accountsInvoice)),{paymentStatus:x,client_secret:C}=(0,n.v9)((e=>e.accountsPayment)),{receipt_id:P}=(0,n.v9)((e=>e.accountsReceipt)),$=new Date(1e3*D).toLocaleString(),B=L/100,Y=U/100,Z=O/100,j=L/100,q=(0,n.I0)();return(0,r.useEffect)((()=>{h&&q((0,c.PR)()).then((t=>{void 0!==t.error?(console.error(t.error.message),l("error"),b(t.error.message)):q((0,s.o4)(e)).then((e=>{void 0!==e.error?(console.error(e.error.message),l("error"),b(e.error.message)):q((0,o.xt)(e.payload.stripe_invoice_id)).then((e=>{void 0!==e.error&&(console.error(e.error.message),l("error"),b(e.error.message))}))}))}))}),[h,q]),(0,r.useEffect)((()=>{F&&q((0,o.Lu)()).then((e=>{void 0!==e.error&&(console.error(e.error.message),l("error"),b(e.error.message))}))}),[F,q]),(0,r.useEffect)((()=>{"paid"===y&&A&&q((0,m.jg)()).then((e=>{void 0!==e.error?(console.error(e.error.message),l("error"),b(e.error.message)):(console.log(e.payload.id),(0,m.Qu)(e.payload.id))}))}),[A,y,q]),p?r.createElement(u.default,null):N?r.createElement(d.default,{error:N}):r.createElement(r.Fragment,null,r.createElement("section",{className:"invoice"},r.createElement("h2",{className:"title"},"INVOICE"),r.createElement("div",{className:"invoice-card card"},r.createElement("table",{className:"invoice-table",id:"service_invoice"},r.createElement("thead",{className:"invoice-table-head",id:"service-total-header"},r.createElement("tr",null,r.createElement("th",{className:"bill-to-label",colSpan:2},r.createElement("h4",null,"BILL TO:")),r.createElement("td",{className:"bill-to-name",colSpan:2},g),Array.isArray(v)&&v.length>0&&v.map(((e,t)=>r.createElement(r.Fragment,null,r.createElement("td",{className:"bill-to-tax-id-type",key:t},e.type),r.createElement("td",{className:"bill-to-tax-id",key:t},e.value))))),r.createElement("tr",{className:"bill-to-address"},r.createElement("td",null),r.createElement("td",null),r.createElement("td",{colSpan:2},f),r.createElement("td",null,_)),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",{className:"bill-to-city"},S),r.createElement("td",{className:"bill-to-state"},T),r.createElement("td",{className:"bill-to-zipcode"},w)),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",{className:"bill-to-phone"},R),r.createElement("td",null),r.createElement("td",null)),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",{className:"bill-to-email",colSpan:2},I),r.createElement("td",null)),r.createElement("tr",{className:"bill-to-due"},r.createElement("th",{className:"bill-to-due-date-label",colSpan:2},r.createElement("h4",null,"DUE DATE")),r.createElement("td",{className:"bill-to-due-date",colSpan:2},$||"N/A"),r.createElement("th",{className:"bill-to-total-due-label"},r.createElement("h4",null,"TOTAL DUE")),r.createElement("td",{className:"bill-to-total-due"},r.createElement("h4",null,L?new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(B):"N/A"))),r.createElement("tr",{className:"invoice-labels"},r.createElement("th",null,r.createElement("h4",{className:"number-label"},"NO.")),r.createElement("th",{colSpan:4},r.createElement("h4",{className:"description-label"},"DESCRIPTION")),r.createElement("th",null,r.createElement("h4",{className:"total-label"},"TOTAL")))),r.createElement("tbody",null,k&&k.length>0&&k.map((e=>r.createElement("tr",{id:"quote_option"},r.createElement("td",{className:"feature-id"},e.price.product),r.createElement("td",{className:"feature-name",id:"feature_name",colSpan:4},e.description),r.createElement("td",{className:"feature-cost  table-number",id:"feature_cost"},r.createElement("h4",null,new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(e.amount/100))))))),r.createElement("tfoot",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("th",null,r.createElement("h4",{className:"subtotal-label"},"SUBTOTAL")),r.createElement("td",null,r.createElement("h4",{className:"subtotal table-number"},new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(Y)))),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("th",null,r.createElement("h4",{className:"tax-label"},"TAX")),r.createElement("td",null,r.createElement("h4",{className:"tax table-number"},new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(Z)))),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("td",null),r.createElement("th",null,r.createElement("h4",{className:"grand-total-label"},"GRAND TOTAL")),r.createElement("th",null,r.createElement("h4",{className:"grand-total table-number"},new Intl.NumberFormat("us",{style:"currency",currency:"USD"}).format(j))))))),r.createElement(i.Z,{message:E,messageType:t}),r.createElement("button",{onClick:async()=>{"paid"===y&&P?window.location.href=`/billing/receipt/${P}`:"open"===y&&C?window.location.href=`/billing/payment/${e}`:"draft"===y&&A&&q((0,s.Y_)()).then((e=>{void 0!==e.error?(console.error(e.error.message),l("error"),b(e.error.message)):q((0,o.Lu)(e.payload.payment_intent_id)).then((e=>{void 0!==e.error?(console.error(e.error.message),l("error"),b(e.error.message)):q((0,o.Ts)(e.payload.client_secret)).then((e=>{void 0!==e.error?(console.error(e.error.message),l("error"),b(e.error.message)):window.location.href=`/billing/receipt/${P}`}))}))}))}},"paid"===y&&P||"succeeded"===x&&P?r.createElement("h3",null,"RECEIPT"):"open"===y&&C?r.createElement("h3",null,"PAYMENT"):"")))}},8849:(e,t,l)=>{l.d(t,{Z:()=>r});const r=function(e){const{message:t,messageType:l}=e;return React.createElement(React.Fragment,null,t&&React.createElement("div",{className:`status-bar card ${l}`},React.createElement("span",null,React.createElement("h4",null,t))))}}}]);